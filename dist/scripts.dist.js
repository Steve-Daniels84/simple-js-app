let pokemonRepository=function(){let e=[];function t(t){let n={name:t.name,detailUrl:t.detailUrl};e.push(n)}function n(){return e}function a(e){return fetch(e.detailUrl).then(function(e){return e.json()}).then(function(t){e.name=t.name,e.imageUrl=t.sprites.front_default,e.height=t.height,e.weight=t.weight,e.types=t.types,e.stats=t.stats,e.largeImage=t.sprites.other.dream_world.front_default}).catch(function(e){console.error(e)})}function o(e){let t=$(".pokemon-list"),n=cardBuilder(e);t.append(n)}return document.querySelector("#close-button"),{clearList:function t(){e=[]},add:t,getAll:n,addListItem:o,loadList:function e(){return fetch("https://pokeapi.co/api/v2/pokemon/?limit=150").then(function(e){return e.json()}).then(function(e){e.results.forEach(function(e){let n={name:e.name,detailUrl:e.url};a(n),t(n),o(n)})}).catch(function(e){console.error(e)})},loadDetails:a}}();pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(e){})});let searchBox=document.getElementById("sValue"),searchParam="",searchFocus=!1,searchReset=document.getElementById("search-reset");function pokemonSearch(){if(""===searchParam)headerWarning("Nothing entered");else{let e=pokemonRepository.getAll().filter(e=>e.name.toLowerCase().includes(searchParam.toLowerCase()));0===e.length?headerWarning("Your search returned no results"):(document.querySelectorAll("li").forEach(function(e){e.remove(),pokemonRepository.clearList()}),e.forEach(function(e){pokemonRepository.addListItem(e)}))}}function headerWarning(e){document.getElementById("search-error").innerHTML=e,setTimeout(function(){document.getElementById("search-error").innerHTML=""},5e3)}function cardBuilder(e){let t=$('<li class="list-group-item d-flex p-2 sidebar-card"></li>'),n=$('<button type="button" class="btn btn-sm btn-danger" data-bs-toggle="modal" data-bs-target="#detailModal">GO!</button>'),a=$("<div></div>"),o=$('<h4 class="card-title h4">'+e.name+"</h4>"),r=$('<div class="container"></div>'),i=$('<div class="container-fluid"></div>'),s=$('<img class="img-thumbnail" alt="An image of a "'+e.name+"></img>");return i.append(s),r.append(o),a.append(n),pokemonRepository.loadDetails(e).then(function(){s.attr("src",e.imageUrl)}),t.append(i),t.append(r),t.append(a),n.on("click",function(t){modalBuilder(e)}),t}function modalBuilder(e){let t=$("#types");t.empty();let n=$("#height"),a=$("#weight");n.text("Height: "+e.height),a.text("Weight: "+e.weight);let o=$("#detailModalLabel"),r=$(e.stats),i=$(e.types),s=e.name,l=s.charAt(0).toUpperCase()+s.slice(1);o.text(l),$("#pokemon-image").attr("src",e.largeImage),$("#pokemon-image").attr("alt","A large image of a "+e.name),r.each(function(e,t){let n=$("#"+t.stat.name),a=$("."+t.stat.name);a.attr("aria-valuenow",t.base_stat),n.text(t.base_stat),n.attr("style","width:"+t.base_stat/255*100+"%")}),i.each(function(e,t){let n=$("#types"),a=$('<div class="type-card '+t.type.name+'">'+t.type.name+"</div>"),o=getComputedStyle(document.documentElement),r=o.getPropertyValue("--"+t.type.name);a.css("background-color",r),n.append(a)})}searchBox.addEventListener("input",function(){searchParam=searchBox.value}),searchBox.addEventListener("keydown",function(e){(searchFocus="Enter"===e.key)&&pokemonSearch()}),searchBox.addEventListener("focus",function(){searchFocus=!0}),searchBox.addEventListener("blur",function(){searchFocus=!1}),searchReset.addEventListener("click",function(){pokemonRepository.clearList(),searchBox.value="";document.querySelectorAll("li").forEach(function(e){e.remove()}),pokemonRepository.loadList()});
